<!--components/ui/explain/BorgExplain.vue-->

<template>
    <div class="calc-scan">
        <div class="calc-hero" role="img" aria-label="Borg Skala Kurzkarte">
            <div class="calc-hero-top">
                <span class="calc-hero-title">â„¹ï¸ Borg-Skala (RPE)</span>
            </div>

            <div class="calc-hero-sub">
                Schnell: <strong>wie anstrengend es sich anfÃ¼hlt</strong> â€“ nicht Herzfrequenz, nicht Pace.
            </div>

            <div class="calc-hero-pills" aria-label="Schnellnavigation">
                <button class="calc-hero-pill" type="button" @click="jumpTo('borg_tldr')">ğŸ“Œ Kurz</button>
                <button class="calc-hero-pill" type="button" @click="jumpTo('borg_ranges')">ğŸ“Š Bereiche</button>
                <button class="calc-hero-pill calc-hero-pill--warn" type="button" @click="jumpTo('borg_tips')">âš ï¸ Tipps</button>
            </div>
        </div>

        <div class="calc-chips" aria-label="KurzÃ¼berblick">
            <button class="calc-chip" type="button" @click="jumpTo('borg_tldr')">ğŸ“Œ Kurzfassung</button>
            <button class="calc-chip calc-chip--good" type="button" @click="jumpTo('borg_ranges')">ğŸ“Š Bereiche</button>
            <button class="calc-chip" type="button" @click="jumpTo('borg_examples')">ğŸ§  Beispiele</button>
            <button class="calc-chip" type="button" @click="jumpTo('borg_zones')">ğŸ¯ Training damit</button>
            <button class="calc-chip calc-chip--warn" type="button" @click="jumpTo('borg_tips')">âš ï¸ HÃ¤ufige Fehler</button>
        </div>

        <div id="borg_tldr" class="calc-callout calc-callout--tldr" tabindex="-1" ref="tldrEl">
            <div class="calc-callout-title">ğŸ“Œ Kurzfassung</div>
            <div class="calc-callout-text">
                Die Borg-Skala ist dein <strong>subjektives BelastungsgefÃ¼hl</strong> (RPE).
                <ul class="calc-list calc-list--spaced">
                    <li><strong>6</strong> = super leicht / Spaziergang</li>
                    <li><strong>12â€“13</strong> = â€œanstrengend, aber machbarâ€</li>
                    <li><strong>17â€“19</strong> = sehr anstrengend</li>
                    <li><strong>20</strong> = maximal</li>
                </ul>
            </div>
        </div>

        <section id="borg_ranges" class="calc-card" tabindex="-1" ref="rangesEl">
            <h4 class="calc-h">ğŸ“Š Bereiche</h4>
            <div class="calc-bands">
                <div class="calc-band"><span class="calc-band-k">6â€“8</span><span class="calc-band-v">sehr leicht</span></div>
                <div class="calc-band"><span class="calc-band-k">9â€“11</span><span class="calc-band-v">leicht</span></div>
                <div class="calc-band"><span class="calc-band-k">12â€“13</span><span class="calc-band-v">mittel</span></div>
                <div class="calc-band"><span class="calc-band-k">14â€“16</span><span class="calc-band-v">schwer</span></div>
                <div class="calc-band"><span class="calc-band-k">17â€“19</span><span class="calc-band-v">sehr schwer</span></div>
                <div class="calc-band"><span class="calc-band-k">20</span><span class="calc-band-v">maximal</span></div>
            </div>
        </section>

        <section id="borg_examples" class="calc-card" tabindex="-1" ref="examplesEl">
            <h4 class="calc-h">ğŸ§  Beispiele (damit duâ€™s triffst)</h4>
            <ul class="calc-list">
                <li><strong>10:</strong> du kannst gut reden, Atmung ist ruhig</li>
                <li><strong>13:</strong> reden ist noch mÃ¶glich, Atmung deutlich</li>
                <li><strong>15:</strong> kurze SÃ¤tze sind mÃ¶glich, Fokus nÃ¶tig</li>
                <li><strong>18:</strong> sehr hart, du willst bald abbrechen</li>
            </ul>
        </section>

        <section id="borg_zones" class="calc-card" tabindex="-1" ref="zonesEl">
            <h4 class="calc-h">ğŸ¯ Orientierung fÃ¼rs Training</h4>
            <div class="calc-bands">
                <div class="calc-band"><span class="calc-band-k">Borg 9â€“11</span><span class="calc-band-v">Locker / Grundlagenausdauer (Sprechen gut mÃ¶glich)</span></div>
                <div class="calc-band"><span class="calc-band-k">Borg 12â€“13</span><span class="calc-band-v">Mittel (Sprechen noch mÃ¶glich)</span></div>
                <div class="calc-band"><span class="calc-band-k">Borg 14â€“16</span><span class="calc-band-v">Anstrengend / Tempo (Sprechen nur kurz)</span></div>
                <div class="calc-band"><span class="calc-band-k">Borg 17â€“19</span><span class="calc-band-v">Sehr anstrengend / Intervalle (Sprechen kaum mÃ¶glich)</span></div>
            </div>

            <div class="calc-note calc-note--spaced">
                Tipp: Bewerte Borg nach dem <strong>hÃ¤rtesten Abschnitt</strong> (nicht nach den ersten 2 Minuten).
            </div>
        </section>

        <div class="calc-callout">
            <div class="calc-callout-title">ğŸ” 6â€“20 vs. â€œRPE 1â€“10â€ (damit du nicht verwirrst)</div>
            <div class="calc-callout-text">
                <ul class="calc-list">
                    <li><strong>Borg 6â€“20</strong> = klassisch (feiner abgestuft)</li>
                    <li><strong>CR10 / RPE 0â€“10</strong> = einfacher (hÃ¤ufig in Tools/PlÃ¤nen)</li>
                    <li><strong>Faustregel:</strong> Borg 13 â‰ˆ RPE 6â€“7 (grob, nicht exakt)</li>
                </ul>
            </div>
        </div>

        <div class="calc-callout">
            <div class="calc-callout-title">ğŸ§¾ So wird Borg im Training wirklich nÃ¼tzlich</div>
            <div class="calc-callout-text">
                <ul class="calc-list">
                    <li><strong>Timing:</strong> bei Intervallen am Ende des Intervalls bewerten, bei gleichmÃ¤ÃŸigem Tempo nach dem Einpendeln oder am Ende.</li>
                    <li><strong>Mit Kontext notieren:</strong> Borg + Dauer + kurze Notiz (z.B. Schlaf, Hitze, Stress).</li>
                    <li><strong>Konsequent bleiben:</strong> in deinen Logs immer dieselbe Skala nutzen (6â€“20 oder 0â€“10).</li>
                </ul>
            </div>
        </div>

        <div id="borg_tips" class="calc-callout calc-callout--warn" tabindex="-1" ref="tipsEl">
            <div class="calc-callout-title">âš ï¸ HÃ¤ufige Fehler</div>
            <ul class="calc-list">
                <li><strong>Borg â‰  Puls.</strong> Puls kann hoch sein, Borg trotzdem moderat (Hitze, Stress, Koffein).</li>
                <li><strong>Dauer zÃ¤hlt.</strong> Borg 15 fÃ¼r 30 Sekunden â‰  Borg 15 fÃ¼r 20 Minuten.</li>
                <li><strong>Bewerte richtig.</strong> Nach dem schwersten Teil / am Ende des Intervalls.</li>
                <li><strong>Nicht schÃ¤tzen, um â€œgutâ€ dazustehen.</strong> Sonst werden die Daten unzuverlÃ¤ssig.</li>
                <li><strong>Wenn Borg plÃ¶tzlich hoch ist:</strong> Schlaf, Krankheit, FlÃ¼ssigkeit und Energiezufuhr prÃ¼fen.</li>
            </ul>
        </div>
    </div>
</template>

<script setup lang="ts">
    import { ref } from 'vue'

    const tldrEl = ref<HTMLElement | null>(null)
    const rangesEl = ref<HTMLElement | null>(null)
    const examplesEl = ref<HTMLElement | null>(null)
    const tipsEl = ref<HTMLElement | null>(null)
    const zonesEl = ref<HTMLElement | null>(null)

    function jumpTo(id: 'borg_tldr' | 'borg_ranges' | 'borg_examples' | 'borg_zones' | 'borg_tips') {
        const map: Record<string, HTMLElement | null> = {
            borg_tldr: tldrEl.value,
            borg_ranges: rangesEl.value,
            borg_examples: examplesEl.value,
            borg_zones: zonesEl.value,
            borg_tips: tipsEl.value,
        }
        const el = map[id]
        el?.scrollIntoView({ behavior: 'smooth', block: 'start' })
        el?.focus?.()
    }
</script>

<style scoped>
</style>
